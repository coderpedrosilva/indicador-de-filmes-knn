<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Mini Netflix Inteligente</title>
<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:white}
h1{text-align:center;margin:20px 0}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:20px;padding:20px}
.card{background:#1c1c1c;border-radius:12px;padding:12px;text-align:center}
.card img{width:100%;border-radius:8px}
.stars span{font-size:22px;cursor:pointer;color:#555}
.stars span.active{color:gold}
button{margin:20px auto;display:block;padding:14px 30px;border:none;border-radius:10px;background:#e50914;color:white;font-size:16px;cursor:pointer}
.reco{background:#141414;padding:20px}
</style>
</head>

<body>

<h1>ðŸŽ¬ Mini Netflix Inteligente</h1>

<div class="grid" id="catalog"></div>

<button onclick="discover()">Descobrir novos filmes</button>

<div class="reco">
<h2>Recomendado para vocÃª</h2>
<div class="grid" id="recs"></div>
</div>

<script>
const movies = [
"John Wick","Mad Max: Fury Road","Velozes e Furiosos","MissÃ£o ImpossÃ­vel","Duro de Matar","Gladiador","Matrix",
"InvocaÃ§Ã£o do Mal","It: A Coisa","O Exorcista","Atividade Paranormal","HereditÃ¡rio","Jogos Mortais","A Bruxa",
"As Branquelas","Se Beber NÃ£o Case","Todo Mundo em PÃ¢nico","Minha MÃ£e Ã© uma PeÃ§a","American Pie","Click","Gente Grande",
"Titanic","DiÃ¡rio de uma PaixÃ£o","Forrest Gump","Ã€ Procura da Felicidade","A Espera de um Milagre","O Pianista","Clube da Luta",
"Interestelar","Blade Runner","Ex Machina","Avatar","Gravidade","Distrito 9","Duna",
"Toy Story","Shrek","Procurando Nemo","Up","Divertida Mente","Os IncrÃ­veis","Kung Fu Panda"
];

function renderCatalog(){
 const c=document.getElementById("catalog");
 movies.forEach(m=>{
  const div=document.createElement("div");
  div.className="card";
  div.innerHTML=`<h3>${m}</h3><div class="stars">${[1,2,3,4,5].map(n=>`<span onclick="rate('${m}',${n},this)">â˜…</span>`).join("")}</div>`;
  c.appendChild(div);
 });
}

function rate(filme,nota,el){
 fetch("/api/rate",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({filme,nota})});
 const stars=el.parentNode.querySelectorAll("span");
 stars.forEach((s,i)=>s.classList.toggle("active",i<nota));
}

async function discover(){
 const r=await fetch("/api/recommend");
 const data=await r.json();
 const area=document.getElementById("recs");
 area.innerHTML="";
 data.forEach(f=>{
  const div=document.createElement("div");
  div.className="card";
  div.innerHTML=`<h3>${f[0]}</h3><p>${f[1]}</p>`;
  area.appendChild(div);
 });
}

renderCatalog();
</script>
</body>
</html>
